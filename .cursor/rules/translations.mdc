---
alwaysApply: true
---

# Cursor Rules for Translations

## Translation Files Workflow

**CRITICAL: Never edit `web/i18n/translations.ts` directly!**

The file `web/i18n/translations.ts` is automatically generated from the `.arb` files. It should never be manually edited.

## Required Workflow

### When Adding or Modifying Translations:

1. **ONLY edit the `.arb` files** in `web/locales/`:
   - `web/locales/en-US.arb` (English - primary language)
   - `web/locales/de-DE.arb` (German)
   - Add translations for ALL existing language files when adding new keys

2. **ALWAYS run `npm run build-intl`** after editing `.arb` files:
   ```bash
   cd web
   npm run build-intl
   ```
   This regenerates `web/i18n/translations.ts` from the `.arb` files.

3. **Verify the generated file** - Check that `web/i18n/translations.ts` was updated correctly.

### Translation Key Naming Conventions:

- Use camelCase for keys: `myTranslationKey`
- Use descriptive names: `patientName` not `name`
- Prefix replacement keys with `r`: `rAdd`, `rEdit`, `rShow`
- Prefix select keys with `s`: `sPropertyType`, `sPropertySubjectType`
- Prefix number keys with `n`: `nPatient`, `nTask`

### Parameterized Translations:

For translations with parameters, use the ARB format:
```json
"rShow": "Show {name}",
"@rShow": {
  "placeholders": {
    "name": {
      "type": "string"
    }
  }
}
```

### AI Assistant Instructions:

When asked to add or modify translations:

1. **Identify all language files** that need updates (currently: `en-US.arb` and `de-DE.arb`)
2. **Add the translation key to ALL language files** with appropriate translations
3. **Maintain alphabetical order** of keys within each `.arb` file
4. **After editing `.arb` files**, automatically run:
   ```bash
   cd web && npm run build-intl
   ```
5. **Never attempt to edit `web/i18n/translations.ts`** - reject any request to do so
6. **If `web/i18n/translations.ts` is shown in diffs**, it should only show changes from the build process, not manual edits

### Examples:

✅ **Correct workflow:**
- Edit `web/locales/en-US.arb`: Add `"newKey": "New Value"`
- Edit `web/locales/de-DE.arb`: Add `"newKey": "Neuer Wert"`
- Run `cd web && npm run build-intl`
- Commit both `.arb` files and the regenerated `translations.ts`

❌ **Incorrect actions:**
- Directly editing `web/i18n/translations.ts`
- Adding a key to only one language file
- Forgetting to run `npm run build-intl` after editing `.arb` files
- Manually typing TypeScript types in `translations.ts`
